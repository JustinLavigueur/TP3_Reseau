# ==========================
#   Configuration FTP anonyme (désactivée)
#   Auteur : Justin Lavigueur
# ==========================

# on active le service FTP sur IPv4
# listen=YES

# on désactive l’écoute sur IPv6 (on garde seulement IPv4)
# listen_ipv6=NO

# on autorise la connexion anonyme (pas besoin d’utilisateur ni de mot de passe)
# anonymous_enable=YES

# on désactive l’accès FTP des utilisateurs locaux (ex. ubuntu, writer, reader)
# local_enable=NO

# on interdit toute écriture, suppression ou renommage
# write_enable=NO

# on définit le dossier racine pour l’utilisateur anonyme
# anon_root=/srv/ftp/root_anon

# on empêche les anonymes de téléverser (uploader) des fichiers
# anon_upload_enable=NO

# on empêche la création de nouveaux dossiers
# anon_mkdir_write_enable=NO

# on bloque toute autre action nécessitant l’écriture
# anon_other_write_enable=NO

# on active les messages automatiques dans les répertoires
# dirmessage_enable=YES

# on utilise l’heure locale du serveur pour les journaux et transferts
# use_localtime=YES

# on active la journalisation (logs) des connexions et transferts
# xferlog_enable=YES

# message d’accueil pour les utilisateurs
# ftpd_banner=Bienvenue sur le serveur FTP anonyme de Justin !

# ==============================
# Configuration complète du serveur vsFTPd
# Auteur : Justin
# Objectif : Accès FTP locaux, virtuels et sécurisé (SSL/TLS)
# ==============================

# Message d’accueil
ftpd_banner=Bienvenue sur le serveur FTP de Justin !

# Mode standalone (IPv4 uniquement)
listen=YES
listen_ipv6=NO

###################################
# PARAMÈTRES GÉNÉRAUX
###################################
dirmessage_enable=YES
use_localtime=YES
xferlog_enable=YES
write_enable=YES
secure_chroot_dir=/var/run/vsftpd/empty
max_clients=200
max_per_ip=4

###################################
# SECTION FTP ANONYME (désactivée)
###################################
anonymous_enable=NO

###################################
# SECTION UTILISATEURS LOCAUX
###################################
local_enable=YES
chroot_local_user=NO
allow_writeable_chroot=YES

# Liste des utilisateurs chrootés
chroot_list_enable=YES
chroot_list_file=/etc/vsftpd.chroot_list

# Liste blanche des utilisateurs autorisés
userlist_enable=YES
userlist_file=/etc/vsftpd.userlist
userlist_deny=NO

###################################
# SECTION UTILISATEURS VIRTUELS
###################################
guest_enable=NO
guest_username=ftp
pam_service_name=vsftpd.virtual
user_config_dir=/etc/vsftpd/vsftpd_user_conf

###################################
# SECTION SSL / TLS (peut être commenté selon si oui ou non on veut SSL)
###################################
# ssl_enable=YES
# allow_anon_ssl=NO
# force_local_data_ssl=YES
# force_local_logins_ssl=YES
# ssl_tlsv1=YES
# ssl_sslv2=NO
# ssl_sslv3=NO

# Chemins vers le certificat et la clé
rsa_cert_file=/etc/ssl/certs/vsftpd.crt
rsa_private_key_file=/etc/ssl/private/vsftpd.key

# Options SSL recommandées
require_ssl_reuse=NO
ssl_ciphers=HIGH
